#!/usr/bin/env swift-osx

import Foundation
import WL

if Process.arguments.count != 3 {
	fatalError("Invalid number of arguments.")
}

let fileToAnalyze = Process.arguments[1]
let projectNames = Process.arguments[2].componentsSeparatedByString(";").map {
	$0.stringByTrimmingCharactersInSet(NSCharacterSet.whitespaceAndNewlineCharacterSet())
}
let checker = FileHeaderChecker(projectNames: projectNames)
let results = try! checker.performAnalysis(fileToAnalyze)
for result in results {
	print("\(result.filePath):1: warning: \(result.issueReason)")
}
